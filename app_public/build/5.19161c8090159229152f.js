(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{yebe:function(e,t,r){"use strict";r.r(t),r.d(t,"GeneralModule",(function(){return v}));var n=r("ofXK"),i=r("tyNb"),o=r("fXoL"),a=r("ej43"),b=r("pLZG");let s=(()=>{class e{constructor(e){this.router=e,this.urls=[],this.router.events.pipe(Object(b.a)(e=>e instanceof i.a)).subscribe(e=>{this.urls=[...this.urls,e.urlAfterRedirects]})}getPreviousUrl(){const e=this.urls.length;return e>1?this.urls[e-2]:"/"}getLastNonLoginUrl(){const e=["/register","/login"],t=this.urls.filter(t=>!e.includes(t)),r=t.length;return r>1?t[r-1]:"/"}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(i.b))},e.\u0275prov=o.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=r("3Pt+");function c(e,t){if(1&e&&(o.Kb(0,"div",13),o.ac(1),o.Jb()),2&e){const e=o.Tb();o.xb(1),o.cc(" ",e.formError,"")}}let d=(()=>{class e{constructor(e,t,r){this.router=e,this.authenticationService=t,this.historyService=r,this.formError="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0}}ngOnInit(){}onRegisterSubmit(){this.formError="",this.credentials.name&&this.credentials.email&&this.credentials.password?this.doRegister():this.formError="\u5168\u90e8\u6b04\u4f4d\u90fd\u662f\u5fc5\u586b\uff0c\u8acb\u518d\u8a66\u4e00\u6b21"}doRegister(){this.authenticationService.register(this.credentials).then(()=>this.router.navigateByUrl(this.historyService.getLastNonLoginUrl())).catch(e=>this.formError=e)}clearErr(){this.formError="",this.credentials.name=""}captalCase(e){return e?e.replace(/\w\S*/g,e=>e[0].toUpperCase()+e.substr(1).toLowerCase()):""}}return e.\u0275fac=function(t){return new(t||e)(o.Hb(i.b),o.Hb(a.a),o.Hb(s))},e.\u0275cmp=o.Bb({type:e,selectors:[["app-register"]],decls:28,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["routerLink","/general/login",1,"btn","btn-primary"],[3,"submit"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 \u59d3\u540d ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["type","pasword","id","password","name","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","role","button",1,"btn","btn-primary"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(o.Ib(0,"br"),o.Ib(1,"br"),o.Ib(2,"br"),o.Kb(3,"div",0),o.Kb(4,"div",1),o.Kb(5,"p",2),o.ac(6,"\u5982\u679c\u5df2\u7d93\u662f\u6703\u54e1\u8acb\u76f4\u63a5 "),o.Kb(7,"a",3),o.ac(8,"\u767b \u5165"),o.Jb(),o.Jb(),o.Kb(9,"form",4),o.Rb("submit",(function(){return t.onRegisterSubmit()})),o.Zb(10,c,2,1,"div",5),o.Kb(11,"div",6),o.Kb(12,"div",7),o.Kb(13,"span",8),o.ac(14,"\u59d3 \u540d\uff1a"),o.Jb(),o.Jb(),o.Kb(15,"input",9),o.Rb("ngModelChange",(function(e){return t.credentials.name=e})),o.Jb(),o.Jb(),o.Kb(16,"div",6),o.Kb(17,"div",7),o.Kb(18,"span",8),o.ac(19,"Email\uff1a"),o.Jb(),o.Jb(),o.Kb(20,"input",10),o.Rb("ngModelChange",(function(e){return t.credentials.email=e})),o.Jb(),o.Jb(),o.Kb(21,"div",6),o.Kb(22,"div",7),o.Kb(23,"span",8),o.ac(24,"\u5bc6 \u78bc\uff1a"),o.Jb(),o.Jb(),o.Kb(25,"input",11),o.Rb("ngModelChange",(function(e){return t.credentials.password=e})),o.Jb(),o.Jb(),o.Kb(26,"button",12),o.ac(27,"\u8a3b\u518a"),o.Jb(),o.Jb(),o.Jb(),o.Jb()),2&e&&(o.xb(10),o.Ub("ngIf",t.formError),o.xb(5),o.Ub("ngModel",t.credentials.name),o.xb(5),o.Ub("ngModel",t.credentials.email),o.xb(5),o.Ub("ngModel",t.credentials.password))},directives:[i.d,l.m,l.e,l.f,n.i,l.b,l.d,l.g],styles:[""]}),e})();function u(e,t){if(1&e&&(o.Kb(0,"div",15),o.ac(1),o.Jb()),2&e){const e=o.Tb();o.xb(1),o.cc(" ",e.formError,"")}}let p=(()=>{class e{constructor(e,t,r){this.router=e,this.authenticationService=t,this.historyService=r,this.formError="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0}}ngOnInit(){this.authenticationService.getCurrentUser()&&(this.credentials.email=this.authenticationService.getMail(),this.credentials.name=this.authenticationService.getName())}onLoginSubmit(){this.formError="",this.credentials.email&&this.credentials.password?this.doLogin():this.formError="\u5168\u90e8\u6b04\u4f4d\u90fd\u5fc5\u586b"}doLogin(){this.credentials.name=this.credentials.name,this.authenticationService.login(this.credentials).then(()=>{this.router.navigateByUrl(this.historyService.getLastNonLoginUrl())}).catch(e=>{this.formError=e})}clearErr(){this.formError="",this.credentials.name=""}captalCase(e){return e?e.replace(/\w\S*/g,e=>e[0].toUpperCase()+e.substr(1).toLowerCase()):""}}return e.\u0275fac=function(t){return new(t||e)(o.Hb(i.b),o.Hb(a.a),o.Hb(s))},e.\u0275cmp=o.Bb({type:e,selectors:[["app-login"]],decls:27,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["routerLink","/general/register",1,"btn","btn-primary"],[3,"submit"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","autocomplete","on","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["type","password","autocomplete","on","id","password","name","password","placeholder","\u8f38\u5165\u5bc6\u78bc",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","fMargin"],["type","submit","role","button",1,"btn","btn-primary"],["type","checkbox","name","keepLocal",2,"margin-left","100px",3,"ngModel","ngModelChange"],["for","keepLocal"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(o.Ib(0,"br"),o.Ib(1,"br"),o.Ib(2,"br"),o.Kb(3,"div",0),o.Kb(4,"div",1),o.Kb(5,"p",2),o.ac(6,"\u4e0d\u662f\u6703\u54e1\u8acb\u5148 "),o.Kb(7,"a",3),o.ac(8,"\u8a3b \u518a"),o.Jb(),o.Jb(),o.Kb(9,"form",4),o.Rb("submit",(function(){return t.onLoginSubmit()})),o.Zb(10,u,2,1,"div",5),o.Kb(11,"div",6),o.Kb(12,"div",7),o.Kb(13,"span",8),o.ac(14,"Email\uff1a"),o.Jb(),o.Jb(),o.Kb(15,"input",9),o.Rb("ngModelChange",(function(e){return t.credentials.email=e})),o.Jb(),o.Jb(),o.Kb(16,"div",6),o.Kb(17,"div",7),o.Kb(18,"span",8),o.ac(19,"\u5bc6 \u78bc\uff1a"),o.Jb(),o.Jb(),o.Kb(20,"input",10),o.Rb("ngModelChange",(function(e){return t.credentials.password=e})),o.Jb(),o.Jb(),o.Kb(21,"div",11),o.Kb(22,"button",12),o.ac(23,"\u767b\u5165"),o.Jb(),o.Kb(24,"input",13),o.Rb("ngModelChange",(function(e){return t.credentials.keep=e})),o.Jb(),o.Kb(25,"label",14),o.ac(26,"\u8a18\u4f4fEmail\uff0c\u4e0b\u6b21\u4e0d\u7528\u8f38\u5165"),o.Jb(),o.Jb(),o.Jb(),o.Jb(),o.Jb()),2&e&&(o.xb(10),o.Ub("ngIf",t.formError),o.xb(5),o.Ub("ngModel",t.credentials.email),o.xb(5),o.Ub("ngModel",t.credentials.password),o.xb(4),o.Ub("ngModel",t.credentials.keep))},directives:[i.d,l.m,l.e,l.f,n.i,l.b,l.d,l.g,l.a],styles:[""]}),e})();var g=r("FQVY"),m=r("N+FS");function h(e,t){if(1&e&&(o.Kb(0,"div",5),o.ac(1),o.Jb()),2&e){const e=o.Tb();o.xb(1),o.cc(" ",e.formError,"")}}function f(e,t){if(1&e){const e=o.Lb();o.Kb(0,"form",6),o.Rb("submit",(function(){return o.Wb(e),o.Tb().onSubmit()})),o.Kb(1,"div",7),o.Kb(2,"div",8),o.Kb(3,"span",9),o.ac(4,"\u59d3 \u540d\uff1a"),o.Jb(),o.Jb(),o.Kb(5,"input",10),o.Rb("ngModelChange",(function(t){return o.Wb(e),o.Tb().credentials.name=t})),o.Jb(),o.Jb(),o.Kb(6,"div",7),o.Kb(7,"div",8),o.Kb(8,"span",9),o.ac(9,"Email\uff1a"),o.Jb(),o.Jb(),o.Kb(10,"input",11),o.Rb("ngModelChange",(function(t){return o.Wb(e),o.Tb().credentials.email=t})),o.Jb(),o.Jb(),o.Kb(11,"div",7),o.Kb(12,"div",8),o.Kb(13,"span",9),o.ac(14,"\u7d1a \u5225\uff1a"),o.Jb(),o.Jb(),o.Kb(15,"select",12),o.Rb("ngModelChange",(function(t){return o.Wb(e),o.Tb().credentials.role=t})),o.Kb(16,"option",13),o.ac(17,"\u521d\u7d1a"),o.Jb(),o.Kb(18,"option",13),o.ac(19,"\u4e2d\u7d1a"),o.Jb(),o.Kb(20,"option",13),o.ac(21,"\u4e2d\u9ad8\u7d1a"),o.Jb(),o.Jb(),o.Jb(),o.Kb(22,"div",7),o.Kb(23,"div",8),o.Kb(24,"span",9),o.ac(25,"\u89d2 \u8272\uff1a"),o.Jb(),o.Jb(),o.Kb(26,"select",12),o.Rb("ngModelChange",(function(t){return o.Wb(e),o.Tb().credentials.role=t})),o.Kb(27,"option",13),o.ac(28,"client"),o.Jb(),o.Kb(29,"option",13),o.ac(30,"user"),o.Jb(),o.Kb(31,"option",13),o.ac(32,"admin"),o.Jb(),o.Jb(),o.Jb(),o.Kb(33,"button",14),o.ac(34,"\u5132\u5b58"),o.Jb(),o.Jb()}if(2&e){const e=o.Tb();o.xb(5),o.Ub("ngModel",e.credentials.name),o.xb(5),o.Ub("ngModel",e.credentials.email),o.xb(5),o.Ub("ngModel",e.credentials.role),o.xb(1),o.Ub("ngValue",5),o.xb(2),o.Ub("ngValue",4),o.xb(2),o.Ub("ngValue",3),o.xb(6),o.Ub("ngModel",e.credentials.role),o.xb(1),o.Ub("ngValue",5),o.xb(2),o.Ub("ngValue",4),o.xb(2),o.Ub("ngValue",3)}}const J=[{path:"register",component:d},{path:"login",component:p},{path:"admin",component:(()=>{class e{constructor(e,t,r){this.authService=e,this.dataService=t,this.wordsService=r,this.uploadFileName="",this.formError="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.user=this.authService.getCurrentUser()}ngOnInit(){}onUpfile(e){let t=e[0];this.uploadFileName=t.name;let r=new FileReader,n=this;r.onloadend=function(e){n.dealWordBase(r.result.toString().split("/\r\n|\r|\n/",1e4))},r.readAsText(t)}pressBtn(){document.getElementById("myFile").click()}dealWordBase(e){for(let t of e){const e=t.split(",",10);this.wordsService.sendwords({wdId:e[0],eng:e[1],chi:e[2],grade:e[4],memo:""}),console.log(t)}}}return e.\u0275fac=function(t){return new(t||e)(o.Hb(a.a),o.Hb(g.a),o.Hb(m.a))},e.\u0275cmp=o.Bb({type:e,selectors:[["app-admin"]],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["role","alert","class","alert alert-danger",4,"ngIf"],[3,"submit",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[3,"submit"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 \u59d3\u540d ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["id","role","name","role",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],["type","submit","role","button",1,"btn","btn-primary"]],template:function(e,t){1&e&&(o.Ib(0,"br"),o.Ib(1,"br"),o.Ib(2,"br"),o.Kb(3,"div",0),o.Kb(4,"div",1),o.Kb(5,"p",2),o.ac(6,"\u641c\u5c0b\u4f7f\u7528\u8005 "),o.Jb(),o.Zb(7,h,2,1,"div",3),o.Zb(8,f,35,10,"form",4),o.Jb(),o.Jb()),2&e&&(o.xb(7),o.Ub("ngIf",t.formError),o.xb(1),o.Ub("ngIf",t.setUser))},directives:[n.i,l.m,l.e,l.f,l.b,l.d,l.g,l.k,l.h,l.l],styles:[".FClass[_ngcontent-%COMP%]{display:none}"]}),e})()}];let K=(()=>{class e{}return e.\u0275mod=o.Fb({type:e}),e.\u0275inj=o.Eb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(J)],i.e]}),e})(),v=(()=>{class e{}return e.\u0275mod=o.Fb({type:e}),e.\u0275inj=o.Eb({factory:function(t){return new(t||e)},imports:[[n.b,K,l.c,l.i]]}),e})()}}]);