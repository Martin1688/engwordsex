"use strict";(self.webpackChunkengwordsex_public=self.webpackChunkengwordsex_public||[]).push([[515],{5515:(L,h,p)=>{p.r(h),p.d(h,{GeneralModule:()=>N});var l=p(6895),a=p(6773),e=p(8256),d=p(812),A=p(9300);let C=(()=>{class u{constructor(t){this.router=t,this.urls=[],this.router.events.pipe((0,A.h)(n=>n instanceof a.m2)).subscribe(n=>{this.urls=[...this.urls,n.urlAfterRedirects]})}getPreviousUrl(){const t=this.urls.length;return t>1?this.urls[t-2]:"/"}getLastNonLoginUrl(){const t=["/register","/login"],n=this.urls.filter(r=>!t.includes(r)),o=n.length;return o>1?n[o-1]:"/"}}return u.\u0275fac=function(t){return new(t||u)(e.LFG(a.F0))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var s=p(433);function F(u,i){if(1&u&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}const _=function(u,i){return{"fa-eye-slash":u,"fa-eye":i}};let T=(()=>{class u{constructor(t,n,o){this.router=t,this.authenticationService=n,this.historyService=o,this.formError="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.passwordTextType=!0,this.password2TextType=!0,this.password2content=""}ngOnInit(){}setPasswordText(){this.passwordTextType=!this.passwordTextType}setPassword2Text(){this.password2TextType=!this.password2TextType}onRegisterSubmit(){const t=this.password2content;this.formError="",this.credentials.name&&this.credentials.email&&this.credentials.password?t!==this.credentials.password?this.formError="\u5bc6\u78bc\u8207\u78ba\u8a8d\u5bc6\u78bc\u5fc5\u9808\u76f8\u540c":this.doRegister():this.formError="\u5168\u90e8\u6b04\u4f4d\u90fd\u662f\u5fc5\u586b\uff0c\u8acb\u518d\u8a66\u4e00\u6b21"}doRegister(){this.authenticationService.register(this.credentials).then(()=>this.router.navigateByUrl(this.historyService.getLastNonLoginUrl())).catch(t=>this.formError=t)}clearErr(){this.formError="",this.credentials.name=""}captalCase(t){return t?t.replace(/\w\S*/g,n=>n[0].toUpperCase()+n.substr(1).toLowerCase()):""}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(a.F0),e.Y36(d.$),e.Y36(C))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-register"]],decls:39,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["routerLink","/general/login",1,"btn","btn-primary"],[3,"submit"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","name","name","name","placeholder","\u8f38\u5165 \u59d3\u540d ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["id","password","name","password","placeholder","\u8f38\u5165\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],[1,"fa",3,"ngClass","click"],["id","password2","name","password2","placeholder","\u78ba\u8a8d\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],["type","submit","role","button",1,"btn","btn-primary","fMargin"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"p",2),e._uU(6,"\u5982\u679c\u5df2\u7d93\u662f\u6703\u54e1\u8acb\u76f4\u63a5 "),e.TgZ(7,"a",3),e._uU(8,"\u767b \u5165"),e.qZA()(),e.TgZ(9,"form",4),e.NdJ("submit",function(){return n.onRegisterSubmit()}),e.YNc(10,F,2,1,"div",5),e.TgZ(11,"div",6)(12,"div",7)(13,"span",8),e._uU(14,"\u59d3 \u540d\uff1a"),e.qZA()(),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(r){return n.credentials.name=r}),e.qZA()(),e.TgZ(16,"div",6)(17,"div",7)(18,"span",8),e._uU(19,"Email\uff1a"),e.qZA()(),e.TgZ(20,"input",10),e.NdJ("ngModelChange",function(r){return n.credentials.email=r}),e.qZA()(),e.TgZ(21,"div",6)(22,"div",7)(23,"span",8),e._uU(24,"\u5bc6 \u78bc\uff1a"),e.qZA()(),e.TgZ(25,"input",11),e.NdJ("ngModelChange",function(r){return n.credentials.password=r}),e.qZA(),e.TgZ(26,"div",12)(27,"span",8)(28,"i",13),e.NdJ("click",function(){return n.setPasswordText()}),e.qZA()()()(),e.TgZ(29,"div",6)(30,"div",7)(31,"span",8),e._uU(32,"\u78ba \u8a8d\uff1a"),e.qZA()(),e.TgZ(33,"input",14),e.NdJ("ngModelChange",function(r){return n.password2content=r}),e.qZA(),e.TgZ(34,"div",12)(35,"span",8)(36,"i",13),e.NdJ("click",function(){return n.setPassword2Text()}),e.qZA()()()(),e.TgZ(37,"button",15),e._uU(38,"\u8a3b\u518a"),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",n.formError),e.xp6(5),e.Q6J("ngModel",n.credentials.name),e.xp6(5),e.Q6J("ngModel",n.credentials.email),e.xp6(5),e.Q6J("type",n.passwordTextType?"password":"text")("ngModel",n.credentials.password),e.xp6(3),e.Q6J("ngClass",e.WLB(9,_,n.passwordTextType,!n.passwordTextType)),e.xp6(5),e.Q6J("type",n.password2TextType?"password":"text")("ngModel",n.password2content),e.xp6(3),e.Q6J("ngClass",e.WLB(12,_,n.password2TextType,!n.password2TextType)))},dependencies:[l.mk,l.O5,a.yS,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),u})();function Z(u,i){if(1&u&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}const w=function(u,i){return{"fa-eye-slash":u,"fa-eye":i}};let f=(()=>{class u{constructor(t,n){this.router=t,this.authenticationService=n,this.formError="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.passwordTextType=!0}ngOnInit(){console.log("login");const t=this.authenticationService.getCurrentUser();console.log(t),t?(console.log(JSON.stringify(t)),this.router.navigateByUrl("/words")):(this.credentials.email=this.authenticationService.getMail(),this.credentials.name=this.authenticationService.getName())}setPasswordText(){this.passwordTextType=!this.passwordTextType}onLoginSubmit(){this.formError="",this.credentials.email&&this.credentials.password?this.doLogin():this.formError="\u5168\u90e8\u6b04\u4f4d\u90fd\u5fc5\u586b"}doLogin(){this.credentials.name=this.credentials.name,this.authenticationService.login(this.credentials).then(()=>{document.location.reload()}).catch(t=>{this.formError=t})}clearErr(){this.formError="",this.credentials.name=""}captalCase(t){return t?t.replace(/\w\S*/g,n=>n[0].toUpperCase()+n.substr(1).toLowerCase()):""}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(a.F0),e.Y36(d.$))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-login"]],decls:36,vars:9,consts:[[1,"text-center",2,"color","white"],[1,"row"],[1,"col-12"],[3,"submit"],[1,"lead"],["routerLink","/general/register",1,"btn","btn-primary"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["id","password","name","password","placeholder","\u8f38\u5165\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],[1,"fa",3,"ngClass","click"],[1,"col-12","fMargin"],["type","checkbox","name","keepLocal",3,"ngModel","ngModelChange"],["for","keepLocal"],["role","group","aria-label","Basic example",1,"btn-group"],["type","submit","role","button",1,"btn","btn-primary"],["routerLink","/general/resetpws",1,"btn","btn-primary",2,"margin-left","80px"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"h2",0),e._uU(4,"\u767b\u5165\u9801"),e.qZA(),e.TgZ(5,"div",1)(6,"div",2)(7,"form",3),e.NdJ("submit",function(){return n.onLoginSubmit()}),e.TgZ(8,"p",4),e._uU(9,"\u4e0d\u662f\u6703\u54e1\u8acb\u5148 "),e.TgZ(10,"a",5),e._uU(11,"\u8a3b \u518a"),e.qZA()(),e.YNc(12,Z,2,1,"div",6),e.TgZ(13,"div",7)(14,"div",8)(15,"span",9),e._uU(16,"Email\uff1a"),e.qZA()(),e.TgZ(17,"input",10),e.NdJ("ngModelChange",function(r){return n.credentials.email=r}),e.qZA()(),e.TgZ(18,"div",7)(19,"div",8)(20,"span",9),e._uU(21,"\u5bc6 \u78bc\uff1a"),e.qZA()(),e.TgZ(22,"input",11),e.NdJ("ngModelChange",function(r){return n.credentials.password=r}),e.qZA(),e.TgZ(23,"div",12)(24,"span",9)(25,"i",13),e.NdJ("click",function(){return n.setPasswordText()}),e.qZA()()()(),e.TgZ(26,"div",14)(27,"input",15),e.NdJ("ngModelChange",function(r){return n.credentials.keep=r}),e.qZA(),e.TgZ(28,"label",16),e._uU(29,"\u8a18\u4f4fEmail\uff0c\u4e0b\u6b21\u4e0d\u7528\u8f38\u5165"),e.qZA()(),e.TgZ(30,"div",14)(31,"div",17)(32,"button",18),e._uU(33,"\u767b\u5165"),e.qZA(),e.TgZ(34,"a",19),e._uU(35,"\u5fd8\u8a18\u5bc6\u78bc"),e.qZA()()()()()()),2&t&&(e.xp6(12),e.Q6J("ngIf",n.formError),e.xp6(5),e.Q6J("ngModel",n.credentials.email),e.xp6(5),e.Q6J("type",n.passwordTextType?"password":"text")("ngModel",n.credentials.password),e.xp6(3),e.Q6J("ngClass",e.WLB(6,w,n.passwordTextType,!n.passwordTextType)),e.xp6(2),e.Q6J("ngModel",n.credentials.keep))},dependencies:[l.mk,l.O5,a.yS,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.On,s.F],styles:["h1[_ngcontent-%COMP%]{font-family:DFKai-sb;color:#b22222}"]}),u})();var g=p(1864),B=p(1756);function v(u,i){if(1&u&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}function E(u,i){if(1&u){const t=e.EpF();e.TgZ(0,"li",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.itemSelected(r))}),e._uU(1),e.qZA()}if(2&u){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}function D(u,i){if(1&u&&(e.TgZ(0,"ul"),e.YNc(1,E,2,1,"li",19),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.mailList1)}}function M(u,i){if(1&u&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&u){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t)}}function y(u,i){if(1&u&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&u){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t)}}function x(u,i){if(1&u&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}function U(u,i){if(1&u&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}function S(u,i){if(1&u&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&u){const t=e.oxw();e.xp6(1),e.hij(" ",t.formError,"")}}const c=function(u,i){return{"fa-eye-slash":u,"fa-eye":i}},k=[{path:"",component:f},{path:"register",component:T},{path:"login",component:f},{path:"admin",component:(()=>{class u{constructor(t,n,o,r){this.router=t,this.authService=n,this.generalService=o,this.wordsService=r,this.uploadFileName="",this.mailData=[],this.formError="",this.credentials={_id:"",name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.lastkeydown1=0,this.roleops=["client","user","admin"],this.gradeops=["\u521d\u7d1a","\u4e2d\u7d1a","\u4e2d\u9ad8\u7d1a"],this.isMobile=!1,this.user=this.authService.getCurrentUser()}ngOnInit(){this.authService.isLoggedIn()||this.router.navigateByUrl("/general/login"),this.lastkeydown1=(new Date).getTime(),this.getAutoMails(),this.isMobile=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}onSubmit(){this.generalService.updateUser(this.credentials).then(t=>{const{message:n}=t;this.formError=n},t=>{console.log("Something wrong here",t)})}onDelete(){this.generalService.deleteUser(this.credentials.email).then(t=>{const{message:n}=t;this.formError=n},t=>{console.log("Something wrong here",t)})}onEnter(){const t=this.credentials.email;!t||this.generalService.getAUser(t).then(n=>{const{grade:o,role:r,name:m,_id:O}=n;this.credentials.grade=o,this.credentials.name=m,this.credentials.role=r,this.credentials._id=O})}getAutoMails(){this.isMobile||this.generalService.mailAutoComp().then(t=>{this.retObj=t,Object.assign(this.mailData,this.retObj.ary)},t=>{console.log("Something wrong here",t)})}getMailsFirstWay(t){if(this.isMobile||"Enter"===t.key)return;this.mailList1=[];const n=this.credentials.email;0!=n.length&&n.length>1&&this.lastkeydown1-t.timeStamp>200&&(this.mailList1=this.searchFromArray(this.mailData,n))}searchFromArray(t,n){let r,o=[];for(r=0;r<t.length;r++)t[r].match(n)&&o.push(t[r]);return o}itemSelected(t){this.credentials.email=t,this.mailList1=[],document.getElementById("email").focus()}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(a.F0),e.Y36(d.$),e.Y36(g.m),e.Y36(B.c))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-admin"]],decls:39,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text",3,"click"],["type","email","id","email","name","email","autocapitalize","none",1,"form-control",3,"ngModel","keyup.enter","keyup","ngModelChange"],[1,"sub-list"],[4,"ngIf"],[1,"input-group-text"],["type","email","id","name","name","name","placeholder","\u8f38\u5165 \u59d3\u540d ",1,"form-control",3,"ngModel","ngModelChange"],["id","grade","name","grade",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["id","role","name","role",1,"form-control",3,"ngModel","ngModelChange"],["role","group","aria-label","Basic example",1,"btn-group","fMargin"],["type","button","role","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-success",2,"margin-left","100px",3,"click"],[1,"alert","alert-danger"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngValue"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"p",2),e._uU(6,"\u641c\u5c0b\u4f7f\u7528\u8005 "),e.qZA(),e.YNc(7,v,2,1,"div",3),e.TgZ(8,"form")(9,"div",4)(10,"div",5)(11,"span",6),e.NdJ("click",function(){return n.credentials.email="",n.formError=""}),e._uU(12,"Email\uff1a"),e.qZA()(),e.TgZ(13,"input",7),e.NdJ("keyup.enter",function(){return n.onEnter()})("keyup",function(r){return n.getMailsFirstWay(r)})("ngModelChange",function(r){return n.credentials.email=r}),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"br"),e.YNc(16,D,2,1,"ul",9),e.qZA()(),e.TgZ(17,"div",4)(18,"div",5)(19,"span",10),e._uU(20,"\u59d3 \u540d\uff1a"),e.qZA()(),e.TgZ(21,"input",11),e.NdJ("ngModelChange",function(r){return n.credentials.name=r}),e.qZA()(),e.TgZ(22,"div",4)(23,"div",5)(24,"span",10),e._uU(25,"\u7d1a \u5225\uff1a"),e.qZA()(),e.TgZ(26,"select",12),e.NdJ("ngModelChange",function(r){return n.credentials.grade=r}),e.YNc(27,M,2,2,"option",13),e.qZA()(),e.TgZ(28,"div",4)(29,"div",5)(30,"span",10),e._uU(31,"\u89d2 \u8272\uff1a"),e.qZA()(),e.TgZ(32,"select",14),e.NdJ("ngModelChange",function(r){return n.credentials.role=r}),e.YNc(33,y,2,2,"option",13),e.qZA()(),e.TgZ(34,"div",15)(35,"button",16),e.NdJ("click",function(){return n.onSubmit()}),e._uU(36,"\u4fee\u6539"),e.qZA(),e.TgZ(37,"button",17),e.NdJ("click",function(){return n.onDelete()}),e._uU(38,"\u522a\u9664"),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.formError),e.xp6(6),e.Q6J("ngModel",n.credentials.email),e.xp6(3),e.Q6J("ngIf",n.mailList1),e.xp6(5),e.Q6J("ngModel",n.credentials.name),e.xp6(5),e.Q6J("ngModel",n.credentials.grade),e.xp6(1),e.Q6J("ngForOf",n.gradeops),e.xp6(5),e.Q6J("ngModel",n.credentials.role),e.xp6(1),e.Q6J("ngForOf",n.roleops))},dependencies:[l.sg,l.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.F],styles:[".FClass[_ngcontent-%COMP%]{display:none;z-index:0}ul[_ngcontent-%COMP%]{border-radius:3px;left:0;list-style:none;margin:0;padding:0;position:absolute;width:100%;top:100%;z-index:10000;overflow:hidden;font-size:12px;width:440px;max-height:34vh;overflow-y:scroll}li[_ngcontent-%COMP%]{display:flex;min-height:28px;padding-top:16px;padding-left:25px;padding-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1);font-size:18px;color:red;background-color:#fff}.autocomplete[_ngcontent-%COMP%]{position:absolute}.sub-list[_ngcontent-%COMP%]{position:fixed;margin-top:3px;z-index:5000;margin-left:100px}"]}),u})()},{path:"resetpws",component:(()=>{class u{constructor(t,n,o,r){this.router=t,this.authenticationService=n,this.generalService=o,this.historyService=r,this.formError="",this.userEmail=""}ngOnInit(){}onResetSubmit(){this.generalService.resetpws(this.userEmail).then(t=>{const{message:n}=t;this.formError=n,this.router.navigateByUrl("/general/login")}).catch(t=>{this.formError=t})}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(a.F0),e.Y36(d.$),e.Y36(g.m),e.Y36(C))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-resetpassword"]],decls:18,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"submit"],[1,"lead"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","fMargin"],["role","group","aria-label","Basic example",1,"btn-group"],["type","submit","role","button","title","\u91cd\u8a2d\u4e4b\u5f8c\u539f\u5148\u7684\u5bc6\u78bc\u5c31\u4e0d\u80fd\u7528\u4e86",1,"btn","btn-primary"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"form",2),e.NdJ("submit",function(){return n.onResetSubmit()}),e.TgZ(6,"p",3),e._uU(7,"\u586b\u5165\u8a3b\u518a\u7684email\uff0c\u65b0\u5bc6\u78bc\u6703\u5bc4\u5230email\u4fe1\u7bb1"),e.qZA(),e.YNc(8,x,2,1,"div",4),e.TgZ(9,"div",5)(10,"div",6)(11,"span",7),e._uU(12,"Email\uff1a"),e.qZA()(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(r){return n.userEmail=r}),e.qZA()(),e.TgZ(14,"div",9)(15,"div",10)(16,"button",11),e._uU(17,"\u91cd\u8a2d\u5bc6\u78bc"),e.qZA()()()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",n.formError),e.xp6(5),e.Q6J("ngModel",n.userEmail))},dependencies:[l.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),u})()},{path:"selfuserset",component:(()=>{class u{constructor(t,n){this.router=t,this.authService=n,this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.formError=""}ngOnInit(){this.credentials=this.authService.getCurrentUser()}downGrade(){"\u521d\u7d1a"===this.credentials.grade&&(this.formError="\u521d\u7d1a\u7121\u6cd5\u964d\u7d1a"),this.formError="\u964d\u7d1a\u529f\u80fd\u958b\u767c\u4e2d\u76ee\u524d\u7121\u6cd5\u4f7f\u7528\uff0c\u8981\u5347\u7d1a\u627e\u7db2\u4e3b"}upGrade(){"\u4e2d\u9ad8\u5f4e"===this.credentials.grade&&(this.formError="\u4e2d\u9ad8\u5f4e\u7121\u6cd5\u5347\u7d1a"),this.formError="\u5347\u7d1a\u529f\u80fd\u958b\u767c\u4e2d\u76ee\u524d\u7121\u6cd5\u4f7f\u7528\uff0c\u8981\u5347\u7d1a\u627e\u7db2\u4e3b"}changePassword(){this.router.navigateByUrl("/general/changepws")}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(a.F0),e.Y36(d.$))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-selfuserset"]],decls:36,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"lead"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","name","name","name","placeholder","\u8f38\u5165 \u59d3\u540d ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","grade","name","grade","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["type","email","id","role","name","role","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["role","group","aria-label","Basic example",1,"btn-group","fMargin"],["type","button",1,"btn","btn-success",3,"click"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"form")(6,"p",2),e._uU(7,"\u4f7f\u7528\u8005\u5e33\u865f\u81ea\u6211\u7ba1\u7406"),e.qZA(),e.YNc(8,U,2,1,"div",3),e.TgZ(9,"div",4)(10,"div",5)(11,"span",6),e._uU(12,"\u59d3 \u540d\uff1a"),e.qZA()(),e.TgZ(13,"input",7),e.NdJ("ngModelChange",function(r){return n.credentials.name=r}),e.qZA()(),e.TgZ(14,"div",4)(15,"div",5)(16,"span",6),e._uU(17,"Email\uff1a"),e.qZA()(),e.TgZ(18,"input",8),e.NdJ("ngModelChange",function(r){return n.credentials.email=r}),e.qZA()(),e.TgZ(19,"div",4)(20,"div",5)(21,"span",6),e._uU(22,"\u7b49 \u7d1a\uff1a"),e.qZA()(),e.TgZ(23,"input",9),e.NdJ("ngModelChange",function(r){return n.credentials.grade=r}),e.qZA()(),e.TgZ(24,"div",4)(25,"div",5)(26,"span",6),e._uU(27,"\u89d2 \u8272\uff1a"),e.qZA()(),e.TgZ(28,"input",10),e.NdJ("ngModelChange",function(r){return n.credentials.role=r}),e.qZA()(),e.TgZ(29,"div",11)(30,"button",12),e.NdJ("click",function(){return n.changePassword()}),e._uU(31,"\u4fee\u6539\u5bc6\u78bc"),e.qZA(),e.TgZ(32,"button",12),e.NdJ("click",function(){return n.upGrade()}),e._uU(33,"\u5347\u7d1a"),e.qZA(),e.TgZ(34,"button",12),e.NdJ("click",function(){return n.downGrade()}),e._uU(35,"\u964d\u7d1a"),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",n.formError),e.xp6(5),e.Q6J("ngModel",n.credentials.name),e.xp6(5),e.Q6J("ngModel",n.credentials.email),e.xp6(5),e.Q6J("ngModel",n.credentials.grade),e.xp6(5),e.Q6J("ngModel",n.credentials.role))},dependencies:[l.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F],styles:[".foot2nd[_ngcontent-%COMP%]{margin-bottom:50px;background-color:#008b8b}.left[_ngcontent-%COMP%]{text-align:left;padding-left:15px}.right[_ngcontent-%COMP%]{text-align:right;padding-right:15px}.center[_ngcontent-%COMP%]{text-align:center;overflow-wrap:normal}.clm1[_ngcontent-%COMP%]{width:30%}.clm2[_ngcontent-%COMP%]{width:70%}.full[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{padding:0 12px;margin:0 5px}"]}),u})()},{path:"changepws",component:(()=>{class u{constructor(t,n,o){this.generalService=t,this.router=n,this.authService=o,this.oldPassword="",this.newPassword="",this.credentials={name:"",email:"",password:"",role:"client",grade:"\u521d\u7d1a",memo:"",signdate:"",keep:!0},this.formError="",this.oldPasswordTextType=!0,this.passwordTextType=!0,this.newPasswordTextType=!0}ngOnInit(){this.credentials=this.authService.getCurrentUser()}onChangePassword(){this.credentials.password&&this.oldPassword&&this.newPassword?this.credentials.password!==this.newPassword?this.formError="\u65b0\u5bc6\u78bc\u8207\u518d\u78ba\u8a8d\u5bc6\u78bc\u5fc5\u9808\u76f8\u540c":this.generalService.changepws(this.credentials,this.oldPassword).then(t=>{const{message:n}=t;this.formError=n,this.router.navigateByUrl("/general/selfuserset")}).catch(t=>{this.formError=t}):this.formError="\u6240\u6709\u6b04\u4f4d\u90fd\u5fc5\u586b"}setNewPasswordText(){this.newPasswordTextType=!this.newPasswordTextType}setPasswordText(){this.passwordTextType=!this.passwordTextType}setOldPasswordText(){this.oldPasswordTextType=!this.oldPasswordTextType}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(g.m),e.Y36(a.F0),e.Y36(d.$))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-changepws"]],decls:40,vars:20,consts:[[1,"row"],[1,"col-12"],[1,"lead"],[3,"submit"],["role","alert","class","alert alert-danger",4,"ngIf"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","email","id","email","name","email","placeholder","\u8f38\u5165 email ",1,"form-control",3,"ngModel","ngModelChange"],["id","oldPassword","name","oldPassword","placeholder","\u8f38\u5165\u820a\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],[1,"fa",3,"ngClass","click"],["id","password","name","password","placeholder","\u8f38\u5165\u65b0\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],["id","password2","name","password2","placeholder","\u78ba\u8a8d\u65b0\u5bc6\u78bc","autocomplete","off",1,"form-control",3,"type","ngModel","ngModelChange"],["type","submit","role","button",1,"btn","btn-primary","fMargin"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"p",2),e._uU(6,"\u4fee\u6539\u500b\u4eba\u5bc6\u78bc "),e.qZA(),e.TgZ(7,"form",3),e.NdJ("submit",function(){return n.onChangePassword()}),e.YNc(8,S,2,1,"div",4),e.TgZ(9,"div",5)(10,"div",6)(11,"span",7),e._uU(12,"Email\uff1a"),e.qZA()(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(r){return n.credentials.email=r}),e.qZA()(),e.TgZ(14,"div",5)(15,"div",6)(16,"span",7),e._uU(17,"\u820a\u5bc6\u78bc\uff1a"),e.qZA()(),e.TgZ(18,"input",9),e.NdJ("ngModelChange",function(r){return n.oldPassword=r}),e.qZA(),e.TgZ(19,"div",10)(20,"span",7)(21,"i",11),e.NdJ("click",function(){return n.setOldPasswordText()}),e.qZA()()()(),e.TgZ(22,"div",5)(23,"div",6)(24,"span",7),e._uU(25,"\u65b0\u5bc6\u78bc\uff1a"),e.qZA()(),e.TgZ(26,"input",12),e.NdJ("ngModelChange",function(r){return n.credentials.password=r}),e.qZA(),e.TgZ(27,"div",10)(28,"span",7)(29,"i",11),e.NdJ("click",function(){return n.setPasswordText()}),e.qZA()()()(),e.TgZ(30,"div",5)(31,"div",6)(32,"span",7),e._uU(33,"\u518d\u78ba\u8a8d\uff1a"),e.qZA()(),e.TgZ(34,"input",13),e.NdJ("ngModelChange",function(r){return n.newPassword=r}),e.qZA(),e.TgZ(35,"div",10)(36,"span",7)(37,"i",11),e.NdJ("click",function(){return n.setNewPasswordText()}),e.qZA()()()(),e.TgZ(38,"button",14),e._uU(39,"\u9001\u51fa"),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",n.formError),e.xp6(5),e.Q6J("ngModel",n.credentials.email),e.xp6(5),e.Q6J("type",n.oldPasswordTextType?"password":"text")("ngModel",n.oldPassword),e.xp6(3),e.Q6J("ngClass",e.WLB(11,c,n.oldPasswordTextType,!n.oldPasswordTextType)),e.xp6(5),e.Q6J("type",n.passwordTextType?"password":"text")("ngModel",n.credentials.password),e.xp6(3),e.Q6J("ngClass",e.WLB(14,c,n.passwordTextType,!n.passwordTextType)),e.xp6(5),e.Q6J("type",n.newPasswordTextType?"password":"text")("ngModel",n.newPassword),e.xp6(3),e.Q6J("ngClass",e.WLB(17,c,n.newPasswordTextType,!n.newPasswordTextType)))},dependencies:[l.mk,l.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),u})()},{path:"author",component:(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-author"]],decls:33,vars:0,consts:[[1,"mainDiv"],[1,"row"],[1,"col-sm-4",2,"display","flex","justify-content","center","align-items","center","border-radius","10px"],["src","../../../../assets/image/MartinPhotoDone.jpg",2,"border-radius","10pt"],[1,"col-sm-8"],[1,"input-group","fMargin"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","id","author ","name","author ","value","\u6f58\u4e01\u745c ",1,"form-control"],["type","text","id","education","name","education","value","\u6771\u5433\u8cc7\u8a0a\u78a9\u58eb",1,"form-control"],["type","text","id","jobtitle","name","jobtitle","value","\u7db2\u7ad9\u8edf\u9ad4\u8a2d\u8a08Freelancer",1,"form-control"],["cols","3","id","explain","name","explain",1,"form-control"],["cols","3","id","purpose","name","purpose",1,"form-control"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"div")(6,"div",5)(7,"div",6)(8,"span",7),e._uU(9,"\u4f5c\u8005\uff1a"),e.qZA()(),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",5)(12,"div",6)(13,"span",7),e._uU(14,"\u5b78\u6b77\uff1a"),e.qZA()(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"div",5)(17,"div",6)(18,"span",7),e._uU(19,"\u8077\u696d\uff1a"),e.qZA()(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"div",5)(22,"div",6)(23,"span",7),e._uU(24,"\u7c21\u4ecb\uff1a"),e.qZA()(),e.TgZ(25,"textarea",11),e._uU(26,"\u672c\u7db2\u7ad9\u63a1MEAN stack (MongoDB, Express, Angular, Node.js)\u8a2d\u8a08\uff1b\u672c\u7db2\u7ad9\u514d\u8cbb\u4f7f\u7528\uff0c\u9808\u5148\u8a3b\u518a\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528"),e.qZA()(),e.TgZ(27,"div",5)(28,"div",6)(29,"span",7),e._uU(30,"\u7528\u9014\uff1a"),e.qZA()(),e.TgZ(31,"textarea",12),e._uU(32,"\u672c\u7db2\u7ad9\u7528\u65bc\u8f14\u52a9\u80cc\u8aa6\u82f1\u6587\u55ae\u5b57\u8a08\u7d04\u8490\u96c6\u516b\u5343\u5b57\u5206\u521d\u7d1a\u4e2d\u7d1a\u8207\u4e2d\u9ad8\u7d1a"),e.qZA()()()()()())},styles:["input[_ngcontent-%COMP%]:read-only{background-color:#dcdcdc}"]}),u})()},{path:"about",component:(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-about"]],decls:19,vars:0,consts:[[1,"mainDiv"],[1,"row"],[1,"col-sm-12"],[2,"font-size","large"],[1,"hint"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"\u4e00\u3001\u7c21\u4ecb"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"\u672c\u7db2\u7ad9\u7528\u65bc\u8f14\u52a9\u80cc\u8aa6\u82f1\u6587\u55ae\u5b57\u8a08\u7d04\u8490\u96c6\u516b\u5343\u5b57\uff0c\u5206\u521d\u7d1a\u4e2d\u7d1a\u8207\u4e2d\u9ad8\u7d1a\uff1b\u5728\u5b78\u7fd2\u82f1\u6587\u6642\u82f1\u6587\u55ae\u5b57\u8207\u6587\u6cd5\u662f\u5169\u5927\u91cd\u9ede\uff0c\u672c\u7db2\u7ad9\u53ea\u7528\u65bc\u8f14\u52a9\u82f1\u6587\u55ae\u5b57\u80cc\u8aa6\uff0c\u5177\u5099\u55ae\u5b57\u4e2d\u6587\u89e3\u91cb\u53ca\u8aa6\u8b80\u529f\u80fd\uff0c\u4e2d\u6587\u89e3\u91cb\u4fc2\u53c3\u8003\u5168\u6c11\u82f1\u6aa2\u4e4b\u82f1\u6587\u55ae\u5b57\u89e3\u91cb\uff0c\u800c\u767c\u97f3\u5247\u662f\u4f7f\u7528html5\u7684\u767c\u97f3\u529f\u80fd\u3002\u672c\u7db2\u7ad9\u539f\u5148\u662f\u7d66\u81ea\u5df1\u5c0f\u5b69\u80cc\u8aa6\u82f1\u6587\u55ae\u5b57\u4f7f\u7528\uff0c\u4f7f\u7528\u5f8c\u6548\u679c\u9817\u4f73\u3002\u56e0\u6b64\u958b\u653e\u7d66\u7db2\u53cb\u6709\u80cc\u8aa6\u82f1\u6587\u9700\u5eab\u8005\u514d\u8cbb\u4f7f\u7528\u3002\u672c\u7db2\u7ad9\u63a1CI/CD\u65b9\u5f0f\u5229\u7528\u696d\u9918\u6642\u9593\u958b\u767c\uff0c\u6703\u6301\u7e8c\u4e0d\u65b7\u6539\u9032\uff0c\u589e\u52a0\u529f\u80fd\u3002"),e.qZA(),e.TgZ(7,"h3"),e._uU(8,"\u4e8c\u3001\u7528\u6cd5\u7c21\u8ff0"),e.qZA(),e.TgZ(9,"p",3),e._uU(10,"\u8981\u4f7f\u7528\u672c\u7db2\u7ad9\u5fc5\u9808\u5148\u8a3b\u518a\u6216\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\uff0c\u767b\u5165\u5f8c\u52063\u6b69\u9a5f\u4f7f\u7528-\u8a2d\u5b9a\u3001\u7df4\u7fd2\u3001\u6e2c\u9a57\u4ee5\u9054\u5230\u6df1\u523b\u7d00\u61b6\u4e4b\u76ee\u6a19\uff1b\u8a2d\u5b9a\u5206\u5169\u7a2e\u4e00\u662f\u300c\u7df4\u7fd2\u8a2d\u5b9a\u300d\u9019\u662f\u7531\u8cc7\u6599\u5eab\u4e2d\u53d6\u51fa\u82f1\u6587\u55ae\u5b57\u4ee5\u4f9b\u7df4\u7fd2\u3002\u53e6\u4e00\u662f\u300c\u55ae\u5b57\u8f38\u5165\u8a2d\u5b9a\u300d\u7531\u4f7f\u7528\u8005\u81ea\u5df1\u8f38\u5165\u55ae\u5b57\uff0c\u4e3b\u8981\u7528\u9014\u662f\u7576\u5b78\u751f\u60f3\u7528\u65bc\u80cc\u8aa6\u82f1\u6587\u8ab2\u672c\u6216\u82f1\u6587\u96dc\u8a8c\u4e2d\u7684\u751f\u5b57\u6642\u4f5c\u70ba\u8f14\u52a9\u4e4b\u7528\u3002\u6709\u4e09\u7a2e\u8f14\u52a9\u65b9\u5f0f\u300c\u55ae\u5b57\u62fc\u5b57\u7df4\u7fd2\u300d\uff0c\u300c\u82f1\u9078\u4e2d\u7df4\u7fd2\u300d\uff0c\u300c\u81ea\u52d5\u8a9e\u97f3\u62fc\u5b57\u300d\uff0c\u6e2c\u9a57\u4e5f\u6709\u4e09\u7a2e\u300c\u55ae\u5b57\u62fc\u5b57\u6e2c\u9a57\u300d\uff0c\u300c\u82f1\u9078\u4e2d\u6e2c\u9a57\u300d\uff0c\u300c\u55ae\u5b57\u586b\u7a7a\u6e2c\u9a57\u300d\uff0c\u7576\u6e2c\u9a57\u90fd\u9054\u523090\u5206\u4ee5\u4e0a\u6642\u518d\u5230\u300c"),e.TgZ(11,"span",4),e._uU(12,"\u8a2d\u5b9a/\u7df4\u7fd2\u8a2d\u5b9a"),e.qZA(),e._uU(13,"\u300d\u4e2d\u53bb\u6309\u4e0b\u300c "),e.TgZ(14,"span",4),e._uU(15,"\u7df4\u7fd2\u5b8c\u6210"),e.qZA(),e._uU(16,"\u300d\u6309\u9215\u3002\u7db2\u9801\u6703\u5c07\u525b\u624d\u8a2d\u5b9a\u7684\u82f1\u6587\u55ae\u5b57\u7531\u8a18\u61b6\u9ad4\u4e2d\u6e05\u9664\u3002\u5c31\u53ef\u4ee5\u91cd\u65b0\u8a2d\u5b9a\u55ae\u5b57\u4f86\u7df4\u7fd2\u3002 "),e.qZA(),e._UZ(17,"br")(18,"br"),e.qZA()()())},styles:[".hint[_ngcontent-%COMP%]{background-color:maroon}"]}),u})()}];let P=(()=>{class u{}return u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[a.Bz.forChild(k),a.Bz]}),u})(),N=(()=>{class u{}return u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[l.ez,P,s.u5,s.UX]}),u})()}}]);